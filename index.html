<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>La chasse aux musées</title>
    <style type="text/css">
        html, body, #map-canvas {
          height: 100%;
          margin: 0;
          padding: 0;
          font-family: cursive;
        }
         
        #description {
          text-align: center;
          position: absolute;
          font-size: 13px;
          z-index: 9;
          right: 20px;
          top: 20px;
          background-color: rgba(166, 166, 166, 0.88);
          border-radius: 20px;
          color: rgb(58, 57, 61);
        }
    </style>
  </head>
  <body>
    <div id="description">
      <h1>La chasse aux musées</h1>
      <span>avec</span>
      <h3>Google Maps JavaScript API</h3>
      <p>Le but de cette page est de recenser les différents musées Parisiens !</p>
    </div>
    <div id="map-canvas"></div>
        <script async
            src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap">
        </script>
        <!-- CDN Google Map Api
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
         -->
        <script type="text/javascript">
 
            /* Déclaration de la Map */
            var map;
           
            /* Déclaration des options et initialisation de la carte */
            function initialize() {
              var mapOptions =
              {
                zoom: 13,
                center: new google.maps.LatLng(48.859952,2.335068)
              };
           
              /* La carte est initialisée en passant le DOM #map-canvas à l’API Google Map. */
              map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);
            }
            
            /* Parfait : nous avons donc une fonction qui nous permet d’afficher notre super carte !*/
            /* Il ne nous reste plus qu’à appeler cette fonction. Nous ajoutons donc un « Listner » 
            /* afin d'initialiser la carte au chargement de la page.*/
              
            /* Listner de la fonction load pour lancer l'initialisation de la Map */
            google.maps.event.addDomListener(window,'load', initialize);
           
        </script>
        <!--CDN Jquery-->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script type="text/javascript">
 
            /* Récupération du Json, lecture du Json, vérification de la présence de coordonnées et ajout de markers */
            $.getJSON('markers.json', function (data) {
              
              /* Puis à chaque itération, nous instancions un marqueur et lui passons en paramètre une position, */
              /* formée grâce aux champs coordonnées_ 0 et 1 de l’objet Field de notre fichier JSON */
              /* et de notre carte précédemment instanciée. */
              for (var i in data) {
                /* vérification de la présence de coordonnées */
                if (data[i].fields.hasOwnProperty("latitude")) {
                  
                  /*creation de la position*/
                  var myLatLng = new google.maps.LatLng(data[i].fields.latitude[0], data[i].fields.longitude[0]); 
                  
                  /*création du marqueur*/ 
                  var marker = new google.maps.Marker({position: myLatLng, map: map, icon: 'museum_32.png'});
                }  
              }
            });
           
            /* listner de la fonction load pour lancer l'initialisa-tion de la Map */
            google.maps.event.addDomListener(window, 'load', initial-ize);
           
        </script>
  </body>
</html>